<html>

<head>

    <title>Docspaces - Edit Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
<!--    <meta http-equiv="content-security-policy" content="default-src 'self'; script-src 'unsafe-inline' localhost:3000 cdnjs.cloudflare.com cdn.jsdelivr.net; style-src localhost:3000 cdnjs.cloudflare.com 'unsafe-inline' fonts.googleapis.com; worker-src 'self' localhost:3000; font-src fonts.googleapis.com fonts.gstatic.com cdnjs.cloudflare.com cdn.jsdelivr.net;">
-->
    <link rel="stylesheet" href="/css/editor_split_layout.css">
    <script src="/js/editor_split_layout.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com"> 
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Lato', sans-serif; }
    </style>


    <%- include('monaco_editor_common_includes') %>

    <script type="module">
        import { marked } from "https://cdn.jsdelivr.net/npm/marked@4.2.12/lib/marked.esm.min.js";

        // We need to do this so we can pass values from EJS. We might change this, but it works ok for now
        import { configureMarkdownEditorOnDOMContentLoaded } from "/js/markdown_editor.js";

        configureMarkdownEditorOnDOMContentLoaded('<%= page.id %>', marked);
    </script>

</head>

<body>

    <div class="wrapper">
        <div class="top-panel" style="padding:0; margin:0;">
            <div style="background-color:white; color: #597c9d; height:39px; min-height:39px; max-height: 39px; overflow: hidden; border-bottom:solid 1px #e8e8e8;">
                <a href="/"><img src="/images/ArctusBoxLogo.png" style="border-radius:3px; left:9px; top:6px; width:28px; height:28px; float:left; position:absolute"/></a>
                <p style="margin:0; font-size:18px; font-weight:300; margin:8px 24px 0px 48px;">Docspaces - Edit Page</p>
            </div>
            <div style="display:flex; flex-direction: row; align-items:center; background-color:#F4F4F4; height:41px; min-height:40px; max-height: 40px; margin:0; border-bottom:solid 1px #ccc;">

                <div style="flex-grow: 1;"></div>
                <div style="padding-right:20px">
                    <form method=POST style="display:inline">
                        <input type=hidden id="save-content" name="content" />
                        <button
                            style="cursor:pointer; color: white; background:#275bb6; border:solid 1px #2255BB; border-radius: 5px; top:30px; right:130px; padding:5px 18px;"
                            id="btnSave">Save</button>
                    </form>
                    <button
                    style="cursor:pointer; background:#eaeaea; border:solid 1px #DADADA; border-radius: 5px; top:30px; right:50px; padding:5px 18px;"
                    id="btnClose" onclick="window.location = '/'">Exit</button>
                </div>
            </div>
        </div>
        <div class="bottom-panel">

            <div class="split-panel-container">
                <div class="split-panel-container-left" style="width:50%">
                    <div style="width:100%; height:100%;" id="editor"></div>
                </div>
                <div class="split-panel-container-resizer" id="split_view_resize_handle"></div>
                <!-- TODO: This won't work when we resize the window, probaly need to update in the resizer JS -->
                <!-- minus 13px because of 5px padding on right side and 8px for resizer -->
                <div class="split-panel-container-right" style="flex-shrink: 1; overflow: scroll; max-width: calc(50vw - 13px);">
                    <div id="previewArea" style="font-size:100%;"> 
                </div> 
                
                </div>
            </div>

        </div>
    </div>

</body>

</html>