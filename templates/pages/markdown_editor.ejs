<html>

<head>

    <title>Docspaces - Edit Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
<!--    <meta http-equiv="content-security-policy" content="default-src 'self'; script-src 'unsafe-inline' localhost:3000 cdnjs.cloudflare.com cdn.jsdelivr.net; style-src localhost:3000 cdnjs.cloudflare.com 'unsafe-inline' fonts.googleapis.com; worker-src 'self' localhost:3000; font-src fonts.googleapis.com fonts.gstatic.com cdnjs.cloudflare.com cdn.jsdelivr.net;">
-->

    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/style_default.css">
    <link rel="stylesheet" href="/css/editor_split_layout.css">
    <script src="/js/editor_split_layout.js"></script>

    <%- include('../site_font_common_includes') %>
    <%- include('../monaco_editor_common_includes') %>

    <script type="module">
        import { marked } from "https://cdn.jsdelivr.net/npm/marked@4.2.12/lib/marked.esm.min.js";

        // We need to do this so we can pass values from EJS. We might change this, but it works ok for now
        import { configureMarkdownEditorOnDOMContentLoaded } from "/js/markdown_editor.js";

        configureMarkdownEditorOnDOMContentLoaded('<%= page.id %>', marked);
    </script>

</head>

<body>

    <div class="wrapper">
        <div class="header-page-area">
            <div class="header-top">
                <a href="/"><img src="/images/ArctusBoxLogo.png" style="border-radius:3px; left:9px; top:6px; width:28px; height:28px; float:left; position:absolute"/></a>
                <p class="main_title">Docspaces <span class="subtitle">early preview</span> - Edit Page (markdown)</p>
            </div>
            <div class="header-toolbar">
                <div style="flex-grow: 1;"></div>
                <div style="padding-right:40px">
                    <form method=POST style="display:inline">
                        <input type=hidden id="save-content" name="content" />
                        <button class="toolbar_button toolbar_button_primary" id="btnSave">Save</button>
                    </form>
                    <button class="toolbar_button" id="btnClose">Exit</button>
                </div>
            </div>
        </div>
        <div class="full-height-editor-area">
            <div class="split-panel-container">
                <div class="split-panel-container-left" style="width:50%">
                    <div style="width:100%; height:100%;" id="editor"></div>
                </div>
                <div class="split-panel-container-resizer" id="split_view_resize_handle"></div>
                <!-- TODO: This won't work when we resize the window, probaly need to update in the resizer JS -->
                <!-- minus 13px because of 5px padding on right side and 8px for resizer -->
                <div class="split-panel-container-right" style="flex-shrink: 1; overflow: scroll; max-width: calc(50vw - 13px); background-color:#f4f4f4;">
                    <div style="margin-bottom:20px; border-bottom:solid 1px #aaa; padding-bottom:16px; text-align: center; font-style: italic;">Preview</div>
                    <div id="previewArea" style="font-size:100%;" class="content-main">
                    </div>
                </div> 
                
                </div>
            </div>            
        </div>
    </div>
</body>

</html>